(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[954],{10512:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(71847).A)("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},20063:(e,t,r)=>{"use strict";var a=r(47260);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},23531:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>A});var a=r(95155),s=r(12115),n=r(20063),i=r(52619),c=r.n(i),o=r(64269),d=r(71847);let u=(0,d.A)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var l=r(2317),h=r(75882),p=r(10512),y=r(82063),m=r(91169);let f=(0,d.A)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),g=(0,d.A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);var x=r(90960),b=r(69801);let v=[{href:"/dashboard",label:"Dashboard",icon:u,requireFeature:null},{href:"/dashboard/games",label:"Jogos",icon:l.A,requireFeature:"gamesEnabled"},{href:"/dashboard/partners",label:"Parceiros",icon:h.A,requireFeature:"gamesEnabled"},{href:"/dashboard/sellers",label:"Vendedores",icon:p.A,requireFeature:"marketplaceEnabled"},{href:"/dashboard/orders",label:"Pedidos",icon:p.A,requireFeature:"marketplaceEnabled"},{href:"/dashboard/coupons",label:"Cupons",icon:y.A,requireFeature:null},{href:"/dashboard/users",label:"Usu\xe1rios",icon:m.A,requireFeature:null},{href:"/dashboard/config",label:"Configura\xe7\xf5es",icon:f,requireFeature:null}];function w(){let e=(0,n.usePathname)(),t=(0,n.useRouter)(),r=async()=>{try{await x.F.logout()}catch(e){}t.push("/login")};return(0,a.jsxs)("aside",{className:"w-64 bg-zinc-900 border-r border-zinc-800 flex flex-col h-screen sticky top-0",children:[(0,a.jsx)("div",{className:"p-6 border-b border-zinc-800",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-emerald-500/10 rounded-lg flex items-center justify-center",children:(0,a.jsx)(l.A,{className:"w-5 h-5 text-emerald-500"})}),(0,a.jsx)("span",{className:"text-xl font-bold text-zinc-100",children:"Nova Era"})]})}),(0,a.jsx)("nav",{className:"flex-1 p-4 space-y-1",children:v.filter(e=>!e.requireFeature||b.gH[e.requireFeature]).map(t=>{let r=e===t.href||"/dashboard"!==t.href&&e.startsWith(t.href);return(0,a.jsxs)(c(),{href:t.href,className:(0,o.cn)("flex items-center gap-3 px-4 py-3 rounded-lg transition-colors",r?"bg-emerald-500/10 text-emerald-500":"text-zinc-400 hover:text-zinc-100 hover:bg-zinc-800"),children:[(0,a.jsx)(t.icon,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-medium",children:t.label})]},t.href)})}),(0,a.jsx)("div",{className:"p-4 border-t border-zinc-800",children:(0,a.jsxs)("button",{onClick:r,className:"flex items-center gap-3 px-4 py-3 rounded-lg w-full text-zinc-400 hover:text-red-400 hover:bg-red-500/10 transition-colors",children:[(0,a.jsx)(g,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-medium",children:"Sair"})]})})]})}let q=(0,d.A)("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),k=(0,d.A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),N=(0,d.A)("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);var E=r(65229);function P(){let[e,t]=(0,s.useState)(!0),[r,n]=(0,s.useState)(!1),[i,c]=(0,s.useState)(!1),o=async()=>{if(!i){c(!0);try{await x.F.healthCheck(),t(!0),n(!1)}catch(e){t(!1)}finally{c(!1)}}};return((0,s.useEffect)(()=>{o();let e=setInterval(o,3e4);return()=>clearInterval(e)},[]),(0,s.useEffect)(()=>{let e=()=>t(!1),r=()=>o();return window.addEventListener("api-offline",e),window.addEventListener("api-online",r),()=>{window.removeEventListener("api-offline",e),window.removeEventListener("api-online",r)}},[]),e||r)?null:(0,a.jsx)("div",{className:"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-50 animate-in slide-in-from-bottom-4",children:(0,a.jsx)("div",{className:"bg-red-950 border border-red-800 rounded-xl p-4 shadow-2xl",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-red-900/50 rounded-lg",children:(0,a.jsx)(q,{className:"w-5 h-5 text-red-400"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("h4",{className:"font-semibold text-red-200 flex items-center gap-2",children:[(0,a.jsx)(k,{className:"w-4 h-4"}),"API Fora do Ar"]}),(0,a.jsx)("p",{className:"text-red-300/80 text-sm mt-1",children:"O servidor est\xe1 temporariamente indispon\xedvel. Algumas funcionalidades podem n\xe3o funcionar corretamente."}),(0,a.jsxs)("button",{onClick:o,disabled:i,className:"mt-3 text-sm text-red-300 hover:text-red-200 underline flex items-center gap-1",children:[(0,a.jsx)(N,{className:"w-3 h-3"}),i?"Verificando...":"Tentar reconectar"]})]}),(0,a.jsx)("button",{onClick:()=>n(!0),className:"text-red-400 hover:text-red-300 p-1",children:(0,a.jsx)(E.A,{className:"w-4 h-4"})})]})})})}var S=r(85501);function A(e){let{children:t}=e,r=(0,n.useRouter)(),[i,c]=(0,s.useState)(!0),[o,d]=(0,s.useState)(null);return((0,s.useEffect)(()=>{!async function(){try{let e=await x.F.getCurrentUser();d(e),c(!1)}catch(e){r.push("/login")}}()},[r]),i)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-zinc-950",children:(0,a.jsx)("div",{className:"animate-spin w-8 h-8 border-2 border-emerald-500 border-t-transparent rounded-full"})}):(0,a.jsx)(S.R.Provider,{value:o,children:(0,a.jsxs)("div",{className:"flex min-h-screen bg-zinc-950",children:[(0,a.jsx)(w,{}),(0,a.jsx)("main",{className:"flex-1 p-8 overflow-auto",children:t}),(0,a.jsx)(P,{})]})})}},31755:(e,t,r)=>{Promise.resolve().then(r.bind(r,23531))},64269:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var a=r(2821),s=r(75889);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},65229:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(71847).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},69801:(e,t,r)=>{"use strict";r.d(t,{G7:()=>n,gH:()=>s});var a=r(95704);let s={gamesEnabled:"true"===a.env.NEXT_PUBLIC_FEATURE_GAMES_ENABLED,marketplaceEnabled:"true"===a.env.NEXT_PUBLIC_FEATURE_MARKETPLACE_ENABLED};function n(e){return s[e]}},75882:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(71847).A)("wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]])},82063:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(71847).A)("ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]])},85501:(e,t,r)=>{"use strict";r.d(t,{J:()=>n,R:()=>s});var a=r(12115);let s=(0,a.createContext)(null),n=()=>(0,a.useContext)(s)},90960:(e,t,r)=>{"use strict";r.d(t,{F:()=>n});let a=r(95704).env.NEXT_PUBLIC_API_URL||"https://neweraapi.squareweb.app";class s{async sleep(e){return new Promise(t=>setTimeout(t,e))}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={"Content-Type":"application/json",...t.headers},s=null;for(let i=0;i<this.maxRetries;i++)try{let n=new AbortController,c=setTimeout(()=>n.abort(),3e4),o=await fetch("".concat(a).concat(e),{...t,headers:r,credentials:"include",signal:n.signal});if(clearTimeout(c),401===o.status)throw e.includes("/login")||(window.location.href="/login"),Error("N\xe3o autorizado");if(!o.ok){let e=await o.text();if(o.status>=500&&i<this.maxRetries-1){s=Error(e||"Erro ".concat(o.status)),await this.sleep(this.retryDelay*(i+1));continue}throw window.dispatchEvent(new Event("api-offline")),Error(e||"Erro ".concat(o.status))}if(window.dispatchEvent(new Event("api-online")),204===o.status)return{};return o.json()}catch(e){var n;if(("AbortError"===e.name||(null==(n=e.message)?void 0:n.includes("fetch")))&&i<this.maxRetries-1){console.warn("API request failed (attempt ".concat(i+1,"/").concat(this.maxRetries,"):"),e.message),s=e,await this.sleep(this.retryDelay*(i+1));continue}throw e}throw window.dispatchEvent(new Event("api-offline")),s||Error("Falha ao conectar com a API ap\xf3s m\xfaltiplas tentativas")}async login(e,t){return this.request("/api/admin/login",{method:"POST",body:JSON.stringify({email:e,password:t})})}async logout(){await this.request("/api/admin/logout",{method:"POST"})}async healthCheck(){try{return(await fetch("".concat(a,"/health"),{method:"GET",cache:"no-store"})).ok}catch(e){return!1}}async getCurrentUser(){return this.request("/api/admin/me")}async isAuthenticated(){try{return await this.getCurrentUser(),!0}catch(e){return!1}}async getGames(){return this.request("/api/games")}async getGame(e){return this.request("/api/games/".concat(e))}async createGame(e){return this.request("/api/games",{method:"POST",body:JSON.stringify(e)})}async updateGame(e,t){return this.request("/api/games/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteGame(e){return this.request("/api/games/".concat(e),{method:"DELETE"})}async getProducts(e){return this.request("/api/products/game/".concat(e))}async createProduct(e){return this.request("/api/products",{method:"POST",body:JSON.stringify(e)})}async deleteProduct(e){return this.request("/api/products/".concat(e),{method:"DELETE"})}async refreshProductImage(e){return this.request("/api/roblox/refresh-product-image/".concat(e),{method:"POST"})}async updateProduct(e,t){return this.request("/api/products/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async getSalesStats(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7;return this.request("/api/payments/stats/period?days=".concat(e))}async getSales(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,r=arguments.length>2?arguments[2]:void 0,a=new URLSearchParams({page:String(e),limit:String(t)});return r&&a.append("days",String(r)),this.request("/api/payments/sales?".concat(a))}async getConfig(){return this.request("/api/config")}async updateConfig(e){return this.request("/api/config",{method:"PUT",body:JSON.stringify(e)})}async notifyBotUpdate(){return this.request("/api/bot/notify-update",{method:"POST"})}async processPlaceholders(e,t){return(await this.request("/api/config/process-placeholders",{method:"POST",body:JSON.stringify({text:e,gamesList:t})})).processedText}async getUsers(){return this.request("/api/admin/users")}async createUser(e){return this.request("/api/admin/register",{method:"POST",body:JSON.stringify(e)})}async deleteUser(e){return this.request("/api/admin/users/".concat(e),{method:"DELETE"})}async updateUser(e,t){return this.request("/api/admin/users/".concat(e),{method:"PATCH",body:JSON.stringify(t)})}async changePassword(e,t){return this.request("/api/admin/users/".concat(e,"/change-password"),{method:"POST",body:JSON.stringify(t)})}async getAllowedRoles(){return this.request("/api/admin/allowed-roles")}async getStats(){return this.request("/api/stats")}async syncRoblox(e){return this.request("/api/roblox/sync",{method:"POST",body:JSON.stringify({placeIdOrUrl:e})})}async importGamepass(e,t){return this.request("/api/roblox/import-gamepass",{method:"POST",body:JSON.stringify({gameId:e,gamepassIdOrUrl:t})})}async getPartners(){return this.request("/api/partners")}async getPartner(e){return this.request("/api/partners/".concat(e))}async updatePartner(e,t){return this.request("/api/partners/".concat(e),{method:"PATCH",body:JSON.stringify(t)})}async createPartner(e){return this.request("/api/partners",{method:"POST",body:JSON.stringify(e)})}async deletePartner(e){return this.request("/api/partners/".concat(e),{method:"DELETE"})}async getAsaasSubaccounts(){return this.request("/api/asaas/subaccounts")}async createAsaasSubaccount(e){return this.request("/api/asaas/subaccounts",{method:"POST",body:JSON.stringify(e)})}async getAsaasBalance(){return this.request("/api/asaas/balance")}async getAsaasAccount(){try{return await this.request("/api/asaas/account")}catch(e){return null}}async getDiscordServerData(){let e=await this.request("/api/discord/server");return e.synced&&e.data||null}async getCoupons(){return this.request("/api/coupons")}async getCoupon(e){return this.request("/api/coupons/".concat(e))}async createCoupon(e){return this.request("/api/coupons",{method:"POST",body:JSON.stringify(e)})}async updateCoupon(e,t){return this.request("/api/coupons/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteCoupon(e){return this.request("/api/coupons/".concat(e),{method:"DELETE"})}async validateCoupon(e){return this.request("/api/coupons/validate",{method:"POST",body:JSON.stringify({code:e})})}async getDeliveries(e){return this.request(e?"/api/deliveries?status=".concat(e):"/api/deliveries")}async getDelivery(e){return this.request("/api/deliveries/".concat(e))}async getDeliveryStats(){return this.request("/api/deliveries/stats")}async updateDeliveryStatus(e,t){return this.request("/api/deliveries/".concat(e,"/status"),{method:"PUT",body:JSON.stringify(t)})}async uploadDeliveryProof(e,t){return this.request("/api/deliveries/".concat(e,"/proof"),{method:"PUT",body:JSON.stringify({proofUrl:t})})}constructor(){this.maxRetries=3,this.retryDelay=1e3}}let n=new s},91169:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(71847).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])}},e=>{e.O(0,[779,695,441,255,358],()=>e(e.s=31755)),_N_E=e.O()}]);