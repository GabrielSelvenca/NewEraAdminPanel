(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[821],{44846:(e,a,s)=>{"use strict";s.d(a,{d:()=>n});var t=s(95155);s(12115);var c=s(22017),r=s(64269);function n(e){let{className:a,...s}=e;return(0,t.jsx)(c.bL,{"data-slot":"switch",className:(0,r.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...s,children:(0,t.jsx)(c.zi,{"data-slot":"switch-thumb",className:(0,r.cn)("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}},67187:(e,a,s)=>{Promise.resolve().then(s.bind(s,79050))},79050:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>k});var t=s(95155),c=s(12115),r=s(90960),n=s(86948),i=s(3998),l=s(65142),d=s(76444),x=s(44846),m=s(51834),o=s(35299),h=s(6191),p=s(75882),u=s(19408),j=s(61362),g=s(91169),N=s(78874),v=s(19204),b=s(21190),z=s(71360),f=s(23664),C=s(69141),w=s(16485),y=s(21873),A=s(85501);function k(){let e=(0,c.useContext)(A.R),a=(null==e?void 0:e.role)==="admin",[s,k]=(0,c.useState)([]),[S,P]=(0,c.useState)([]),[E,J]=(0,c.useState)(!0),[F,R]=(0,c.useState)(""),[_,D]=(0,c.useState)(null),[I,K]=(0,c.useState)(!1),[Z,$]=(0,c.useState)({name:"",pixKey:"",percentage:25}),[B,O]=(0,c.useState)(!1),[T,W]=(0,c.useState)(!1),[X,L]=(0,c.useState)({name:"",cpfCnpj:"",email:"",phone:"",birthDate:"",address:"",addressNumber:"",province:"",postalCode:""});(0,c.useEffect)(()=>{G()},[]);let G=async()=>{try{J(!0);let[e,a]=await Promise.all([r.F.getPartners().catch(()=>[]),r.F.getAsaasSubaccounts().catch(()=>[])]);k(e),P(a)}catch(e){console.error(e),R("Erro ao carregar dados")}finally{J(!1)}},q=async()=>{if(!X.name||!X.cpfCnpj||!X.email)return void R("Preencha todos os campos obrigat\xf3rios");try{W(!0),R(""),await r.F.createAsaasSubaccount(X),O(!1),L({name:"",cpfCnpj:"",email:"",phone:"",birthDate:"",address:"",addressNumber:"",province:"",postalCode:""}),await G()}catch(e){R(e instanceof Error?e.message:"Erro ao criar subconta")}finally{W(!1)}},M=async(e,a)=>{try{await r.F.updatePartner(e,a),await G()}catch(e){console.error(e)}},H=async()=>{if(_)try{await r.F.updatePartner(_.id,Z),K(!1),D(null),await G()}catch(e){R(e instanceof Error?e.message:"Erro ao salvar")}},Q=async e=>{if(confirm("Tem certeza que deseja excluir este parceiro?"))try{await r.F.deletePartner(e),await G()}catch(e){R(e instanceof Error?e.message:"Sem permiss\xe3o para excluir")}};return E?(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)(o.A,{className:"w-8 h-8 animate-spin text-emerald-500"})}):(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-zinc-100",children:"Parceiros & Split PIX"}),(0,t.jsx)("p",{className:"text-zinc-400 mt-1",children:"Configure a divis\xe3o autom\xe1tica de pagamentos"})]}),(0,t.jsxs)(i.$,{onClick:()=>O(!0),className:"bg-emerald-600 hover:bg-emerald-700",children:[(0,t.jsx)(h.A,{className:"w-4 h-4 mr-2"}),"Nova Subconta Asaas"]})]}),(0,t.jsxs)(n.Zp,{className:"bg-zinc-900 border-zinc-800",children:[(0,t.jsx)(n.aR,{children:(0,t.jsxs)(n.ZB,{className:"text-zinc-100 flex items-center gap-2",children:[(0,t.jsx)(p.A,{className:"w-5 h-5 text-emerald-500"}),"Subcontas Asaas (Split Autom\xe1tico)"]})}),(0,t.jsx)(n.Wu,{children:0===S.length?(0,t.jsxs)("div",{className:"text-center py-8 text-zinc-500",children:[(0,t.jsx)(u.A,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,t.jsx)("p",{children:"Nenhuma subconta cadastrada"}),(0,t.jsx)("p",{className:"text-sm mt-1",children:"Crie subcontas para ativar o Split PIX autom\xe1tico"})]}):(0,t.jsx)("div",{className:"grid gap-4",children:S.map(e=>(0,t.jsxs)("div",{className:"p-4 bg-zinc-800 rounded-lg flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-emerald-500/20 flex items-center justify-center",children:(0,t.jsx)(j.A,{className:"w-5 h-5 text-emerald-500"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-zinc-100",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-zinc-500",children:e.email})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-sm text-zinc-400",children:"Wallet ID"}),(0,t.jsx)("p",{className:"text-xs text-zinc-500 font-mono",children:e.walletId})]})]},e.id))})})]}),(0,t.jsxs)(n.Zp,{className:"bg-zinc-900 border-zinc-800",children:[(0,t.jsx)(n.aR,{children:(0,t.jsxs)(n.ZB,{className:"text-zinc-100 flex items-center gap-2",children:[(0,t.jsx)(g.A,{className:"w-5 h-5 text-blue-500"}),"Parceiros (Divis\xe3o Manual)"]})}),(0,t.jsx)(n.Wu,{children:0===s.length?(0,t.jsx)("p",{className:"text-zinc-500 text-center py-4",children:"Nenhum parceiro cadastrado"}):(0,t.jsx)("div",{className:"grid gap-4",children:s.map(e=>(0,t.jsxs)("div",{className:"p-4 bg-zinc-800 rounded-lg flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center ".concat(e.active?"bg-emerald-500/20":"bg-zinc-700"),children:e.active?(0,t.jsx)(j.A,{className:"w-5 h-5 text-emerald-500"}):(0,t.jsx)(N.A,{className:"w-5 h-5 text-zinc-500"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-zinc-100",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-zinc-500",children:e.pixKey})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1 text-zinc-400",children:[(0,t.jsx)(v.A,{className:"w-4 h-4"}),(0,t.jsxs)("span",{children:[e.percentage,"%"]})]}),(0,t.jsxs)("p",{className:"text-xs text-zinc-500",children:["Total: R$ ",e.totalReceived.toFixed(2)]})]}),(0,t.jsx)(x.d,{checked:e.active,onCheckedChange:a=>M(e.id,{active:a})}),(0,t.jsx)(i.$,{size:"sm",variant:"ghost",onClick:()=>{D(e),$({name:e.name,pixKey:e.pixKey,percentage:e.percentage}),K(!0)},className:"text-zinc-400 hover:text-zinc-100",children:(0,t.jsx)(b.A,{className:"w-4 h-4"})}),a&&(0,t.jsx)(i.$,{size:"sm",variant:"ghost",onClick:()=>Q(e.id),className:"text-zinc-400 hover:text-red-400",children:(0,t.jsx)(z.A,{className:"w-4 h-4"})})]})]},e.id))})})]}),(0,t.jsx)(m.lG,{open:I,onOpenChange:K,children:(0,t.jsxs)(m.Cf,{className:"bg-zinc-900 border-zinc-800",children:[(0,t.jsx)(m.c7,{children:(0,t.jsx)(m.L3,{className:"text-zinc-100",children:"Editar Parceiro"})}),(0,t.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(d.J,{className:"text-zinc-300",children:"Nome"}),(0,t.jsx)(l.p,{value:Z.name,onChange:e=>$({...Z,name:e.target.value}),className:"bg-zinc-800 border-zinc-700 text-zinc-100 mt-1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(d.J,{className:"text-zinc-300",children:"Chave PIX"}),(0,t.jsx)(l.p,{value:Z.pixKey,onChange:e=>$({...Z,pixKey:e.target.value}),className:"bg-zinc-800 border-zinc-700 text-zinc-100 mt-1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(d.J,{className:"text-zinc-300",children:"Porcentagem (%)"}),(0,t.jsx)(l.p,{type:"number",value:Z.percentage,onChange:e=>$({...Z,percentage:parseFloat(e.target.value)||0}),className:"bg-zinc-800 border-zinc-700 text-zinc-100 mt-1"})]}),F&&(0,t.jsx)("p",{className:"text-red-400 text-sm",children:F}),(0,t.jsx)(i.$,{onClick:H,className:"w-full bg-emerald-600 hover:bg-emerald-700",children:"Salvar"})]})]})}),(0,t.jsx)(m.lG,{open:B,onOpenChange:O,children:(0,t.jsxs)(m.Cf,{className:"bg-zinc-900 border-zinc-800 max-w-lg",children:[(0,t.jsxs)(m.c7,{children:[(0,t.jsx)(m.L3,{className:"text-zinc-100",children:"Criar Subconta Asaas"}),(0,t.jsx)(m.rr,{className:"text-zinc-400",children:"Crie uma subconta para receber pagamentos automaticamente via Split PIX"})]}),(0,t.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(d.J,{className:"text-zinc-300 flex items-center gap-2",children:[(0,t.jsx)(g.A,{className:"w-4 h-4"})," Nome Completo *"]}),(0,t.jsx)(l.p,{value:X.name,onChange:e=>L({...X,name:e.target.value}),className:"bg-zinc-800 border-zinc-700 text-zinc-100 mt-1",placeholder:"Jo\xe3o Silva"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(d.J,{className:"text-zinc-300 flex items-center gap-2",children:[(0,t.jsx)(u.A,{className:"w-4 h-4"})," CPF/CNPJ *"]}),(0,t.jsx)(l.p,{value:X.cpfCnpj,onChange:e=>L({...X,cpfCnpj:e.target.value}),className:"bg-zinc-800 border-zinc-700 text-zinc-100 mt-1",placeholder:"000.000.000-00"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(d.J,{className:"text-zinc-300 flex items-center gap-2",children:[(0,t.jsx)(f.A,{className:"w-4 h-4"})," Email *"]}),(0,t.jsx)(l.p,{type:"email",value:X.email,onChange:e=>L({...X,email:e.target.value}),className:"bg-zinc-800 border-zinc-700 text-zinc-100 mt-1",placeholder:"email@exemplo.com"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(d.J,{className:"text-zinc-300 flex items-center gap-2",children:[(0,t.jsx)(C.A,{className:"w-4 h-4"})," Telefone"]}),(0,t.jsx)(l.p,{value:X.phone,onChange:e=>L({...X,phone:e.target.value}),className:"bg-zinc-800 border-zinc-700 text-zinc-100 mt-1",placeholder:"(11) 99999-9999"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(d.J,{className:"text-zinc-300 flex items-center gap-2",children:[(0,t.jsx)(w.A,{className:"w-4 h-4"})," Data Nascimento"]}),(0,t.jsx)(l.p,{type:"date",value:X.birthDate,onChange:e=>L({...X,birthDate:e.target.value}),className:"bg-zinc-800 border-zinc-700 text-zinc-100 mt-1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(d.J,{className:"text-zinc-300 flex items-center gap-2",children:[(0,t.jsx)(y.A,{className:"w-4 h-4"})," CEP"]}),(0,t.jsx)(l.p,{value:X.postalCode,onChange:e=>L({...X,postalCode:e.target.value}),className:"bg-zinc-800 border-zinc-700 text-zinc-100 mt-1",placeholder:"00000-000"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsx)(d.J,{className:"text-zinc-300",children:"Endere\xe7o"}),(0,t.jsx)(l.p,{value:X.address,onChange:e=>L({...X,address:e.target.value}),className:"bg-zinc-800 border-zinc-700 text-zinc-100 mt-1",placeholder:"Rua Exemplo"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(d.J,{className:"text-zinc-300",children:"N\xfamero"}),(0,t.jsx)(l.p,{value:X.addressNumber,onChange:e=>L({...X,addressNumber:e.target.value}),className:"bg-zinc-800 border-zinc-700 text-zinc-100 mt-1",placeholder:"123"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(d.J,{className:"text-zinc-300",children:"Bairro"}),(0,t.jsx)(l.p,{value:X.province,onChange:e=>L({...X,province:e.target.value}),className:"bg-zinc-800 border-zinc-700 text-zinc-100 mt-1",placeholder:"Centro"})]}),F&&(0,t.jsx)("p",{className:"text-red-400 text-sm",children:F}),(0,t.jsxs)(i.$,{onClick:q,disabled:T||!X.name||!X.cpfCnpj||!X.email,className:"w-full bg-emerald-600 hover:bg-emerald-700",children:[T?(0,t.jsx)(o.A,{className:"w-4 h-4 mr-2 animate-spin"}):(0,t.jsx)(h.A,{className:"w-4 h-4 mr-2"}),"Criar Subconta"]})]})]})})]})}},85501:(e,a,s)=>{"use strict";s.d(a,{J:()=>r,R:()=>c});var t=s(12115);let c=(0,t.createContext)(null),r=()=>(0,t.useContext)(c)},86948:(e,a,s)=>{"use strict";s.d(a,{BT:()=>l,Wu:()=>d,ZB:()=>i,Zp:()=>r,aR:()=>n});var t=s(95155);s(12115);var c=s(64269);function r(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...s})}function n(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...s})}function i(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...s})}function l(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...s})}function d(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...s})}}},e=>{e.O(0,[779,959,431,529,436,441,255,358],()=>e(e.s=67187)),_N_E=e.O()}]);