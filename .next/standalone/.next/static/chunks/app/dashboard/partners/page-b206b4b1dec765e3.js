(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[821],{44846:(e,a,s)=>{"use strict";s.d(a,{d:()=>c});var t=s(95155);s(12115);var n=s(22017),r=s(64269);function c(e){let{className:a,...s}=e;return(0,t.jsx)(n.bL,{"data-slot":"switch",className:(0,r.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...s,children:(0,t.jsx)(n.zi,{"data-slot":"switch-thumb",className:(0,r.cn)("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}},51834:(e,a,s)=>{"use strict";s.d(a,{Cf:()=>x,Es:()=>u,L3:()=>h,c7:()=>m,lG:()=>i,rr:()=>p,zM:()=>l});var t=s(95155);s(12115);var n=s(76297),r=s(65229),c=s(64269);function i(e){let{...a}=e;return(0,t.jsx)(n.bL,{"data-slot":"dialog",...a})}function l(e){let{...a}=e;return(0,t.jsx)(n.l9,{"data-slot":"dialog-trigger",...a})}function d(e){let{...a}=e;return(0,t.jsx)(n.ZL,{"data-slot":"dialog-portal",...a})}function o(e){let{className:a,...s}=e;return(0,t.jsx)(n.hJ,{"data-slot":"dialog-overlay",className:(0,c.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...s})}function x(e){let{className:a,children:s,showCloseButton:i=!0,...l}=e;return(0,t.jsxs)(d,{"data-slot":"dialog-portal",children:[(0,t.jsx)(o,{}),(0,t.jsxs)(n.UC,{"data-slot":"dialog-content",className:(0,c.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 outline-none sm:max-w-lg",a),...l,children:[s,i&&(0,t.jsxs)(n.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,t.jsx)(r.A,{}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function m(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"dialog-header",className:(0,c.cn)("flex flex-col gap-2 text-center sm:text-left",a),...s})}function u(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"dialog-footer",className:(0,c.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...s})}function h(e){let{className:a,...s}=e;return(0,t.jsx)(n.hE,{"data-slot":"dialog-title",className:(0,c.cn)("text-lg leading-none font-semibold",a),...s})}function p(e){let{className:a,...s}=e;return(0,t.jsx)(n.VY,{"data-slot":"dialog-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...s})}},65142:(e,a,s)=>{"use strict";s.d(a,{p:()=>r});var t=s(95155);s(12115);var n=s(64269);function r(e){let{className:a,type:s,...r}=e;return(0,t.jsx)("input",{type:s,"data-slot":"input",className:(0,n.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...r})}},67187:(e,a,s)=>{Promise.resolve().then(s.bind(s,79050))},79050:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>A});var t=s(95155),n=s(12115),r=s(89171),c=s(86948),i=s(3998),l=s(65142),d=s(76444),o=s(44846),x=s(51834),m=s(35299),u=s(6191),h=s(75882),p=s(19408),g=s(61362),j=s(91169),f=s(78874),v=s(19204),b=s(21190),N=s(71360),z=s(23664),w=s(69141),C=s(16485),y=s(21873),k=s(85501);function A(){let e=(0,n.useContext)(k.R),a=(null==e?void 0:e.role)==="admin",[s,A]=(0,n.useState)([]),[S,P]=(0,n.useState)([]),[E,J]=(0,n.useState)(!0),[_,F]=(0,n.useState)(""),[R,D]=(0,n.useState)(null),[Z,H]=(0,n.useState)(!1),[I,K]=(0,n.useState)({name:"",pixKey:"",percentage:25}),[L,$]=(0,n.useState)(!1),[B,O]=(0,n.useState)(!1),[T,W]=(0,n.useState)({name:"",cpfCnpj:"",email:"",phone:"",birthDate:"",address:"",addressNumber:"",province:"",postalCode:""});(0,n.useEffect)(()=>{X()},[]);let X=async()=>{try{J(!0);let[e,a]=await Promise.all([r.FH.getPartners().catch(()=>[]),r.FH.getAsaasSubaccounts().catch(()=>[])]);A(e),P(a)}catch(e){console.error(e),F("Erro ao carregar dados")}finally{J(!1)}},G=async()=>{if(!T.name||!T.cpfCnpj||!T.email)return void F("Preencha todos os campos obrigat\xf3rios");try{O(!0),F(""),await r.FH.createAsaasSubaccount(T),$(!1),W({name:"",cpfCnpj:"",email:"",phone:"",birthDate:"",address:"",addressNumber:"",province:"",postalCode:""}),await X()}catch(e){F(e instanceof Error?e.message:"Erro ao criar subconta")}finally{O(!1)}},M=async(e,a)=>{try{await r.FH.updatePartner(e,a),await X()}catch(e){console.error(e)}},q=async()=>{if(R)try{await r.FH.updatePartner(R.id,I),H(!1),D(null),await X()}catch(e){F(e instanceof Error?e.message:"Erro ao salvar")}},U=async e=>{if(confirm("Tem certeza que deseja excluir este parceiro?"))try{await r.FH.deletePartner(e),await X()}catch(e){F(e instanceof Error?e.message:"Sem permiss\xe3o para excluir")}};return E?(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)(m.A,{className:"w-8 h-8 animate-spin text-emerald-500"})}):(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-zinc-100",children:"Parceiros & Split PIX"}),(0,t.jsx)("p",{className:"text-zinc-400 mt-1",children:"Configure a divis\xe3o autom\xe1tica de pagamentos"})]}),(0,t.jsxs)(i.$,{onClick:()=>$(!0),className:"bg-emerald-600 hover:bg-emerald-700",children:[(0,t.jsx)(u.A,{className:"w-4 h-4 mr-2"}),"Nova Subconta Asaas"]})]}),(0,t.jsxs)(c.Zp,{className:"bg-zinc-900 border-zinc-800",children:[(0,t.jsx)(c.aR,{children:(0,t.jsxs)(c.ZB,{className:"text-zinc-100 flex items-center gap-2",children:[(0,t.jsx)(h.A,{className:"w-5 h-5 text-emerald-500"}),"Subcontas Asaas (Split Autom\xe1tico)"]})}),(0,t.jsx)(c.Wu,{children:0===S.length?(0,t.jsxs)("div",{className:"text-center py-8 text-zinc-500",children:[(0,t.jsx)(p.A,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,t.jsx)("p",{children:"Nenhuma subconta cadastrada"}),(0,t.jsx)("p",{className:"text-sm mt-1",children:"Crie subcontas para ativar o Split PIX autom\xe1tico"})]}):(0,t.jsx)("div",{className:"grid gap-4",children:S.map(e=>(0,t.jsxs)("div",{className:"p-4 bg-zinc-800 rounded-lg flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-emerald-500/20 flex items-center justify-center",children:(0,t.jsx)(g.A,{className:"w-5 h-5 text-emerald-500"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-zinc-100",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-zinc-500",children:e.email})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-sm text-zinc-400",children:"Wallet ID"}),(0,t.jsx)("p",{className:"text-xs text-zinc-500 font-mono",children:e.walletId})]})]},e.id))})})]}),(0,t.jsxs)(c.Zp,{className:"bg-zinc-900 border-zinc-800",children:[(0,t.jsx)(c.aR,{children:(0,t.jsxs)(c.ZB,{className:"text-zinc-100 flex items-center gap-2",children:[(0,t.jsx)(j.A,{className:"w-5 h-5 text-blue-500"}),"Parceiros (Divis\xe3o Manual)"]})}),(0,t.jsx)(c.Wu,{children:0===s.length?(0,t.jsx)("p",{className:"text-zinc-500 text-center py-4",children:"Nenhum parceiro cadastrado"}):(0,t.jsx)("div",{className:"grid gap-4",children:s.map(e=>(0,t.jsxs)("div",{className:"p-4 bg-zinc-800 rounded-lg flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center ".concat(e.active?"bg-emerald-500/20":"bg-zinc-700"),children:e.active?(0,t.jsx)(g.A,{className:"w-5 h-5 text-emerald-500"}):(0,t.jsx)(f.A,{className:"w-5 h-5 text-zinc-500"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-zinc-100",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-zinc-500",children:e.pixKey})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1 text-zinc-400",children:[(0,t.jsx)(v.A,{className:"w-4 h-4"}),(0,t.jsxs)("span",{children:[e.percentage,"%"]})]}),(0,t.jsxs)("p",{className:"text-xs text-zinc-500",children:["Total: R$ ",e.totalReceived.toFixed(2)]})]}),(0,t.jsx)(o.d,{checked:e.active,onCheckedChange:a=>M(e.id,{active:a})}),(0,t.jsx)(i.$,{size:"sm",variant:"ghost",onClick:()=>{D(e),K({name:e.name,pixKey:e.pixKey,percentage:e.percentage}),H(!0)},className:"text-zinc-400 hover:text-zinc-100",children:(0,t.jsx)(b.A,{className:"w-4 h-4"})}),a&&(0,t.jsx)(i.$,{size:"sm",variant:"ghost",onClick:()=>U(e.id),className:"text-zinc-400 hover:text-red-400",children:(0,t.jsx)(N.A,{className:"w-4 h-4"})})]})]},e.id))})})]}),(0,t.jsx)(x.lG,{open:Z,onOpenChange:H,children:(0,t.jsxs)(x.Cf,{className:"bg-zinc-900 border-zinc-800",children:[(0,t.jsx)(x.c7,{children:(0,t.jsx)(x.L3,{className:"text-zinc-100",children:"Editar Parceiro"})}),(0,t.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(d.J,{className:"text-zinc-300",children:"Nome"}),(0,t.jsx)(l.p,{value:I.name,onChange:e=>K({...I,name:e.target.value}),className:"bg-zinc-800 border-zinc-700 text-zinc-100 mt-1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(d.J,{className:"text-zinc-300",children:"Chave PIX"}),(0,t.jsx)(l.p,{value:I.pixKey,onChange:e=>K({...I,pixKey:e.target.value}),className:"bg-zinc-800 border-zinc-700 text-zinc-100 mt-1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(d.J,{className:"text-zinc-300",children:"Porcentagem (%)"}),(0,t.jsx)(l.p,{type:"number",value:I.percentage,onChange:e=>K({...I,percentage:parseFloat(e.target.value)||0}),className:"bg-zinc-800 border-zinc-700 text-zinc-100 mt-1"})]}),_&&(0,t.jsx)("p",{className:"text-red-400 text-sm",children:_}),(0,t.jsx)(i.$,{onClick:q,className:"w-full bg-emerald-600 hover:bg-emerald-700",children:"Salvar"})]})]})}),(0,t.jsx)(x.lG,{open:L,onOpenChange:$,children:(0,t.jsxs)(x.Cf,{className:"bg-zinc-900 border-zinc-800 max-w-lg",children:[(0,t.jsxs)(x.c7,{children:[(0,t.jsx)(x.L3,{className:"text-zinc-100",children:"Criar Subconta Asaas"}),(0,t.jsx)(x.rr,{className:"text-zinc-400",children:"Crie uma subconta para receber pagamentos automaticamente via Split PIX"})]}),(0,t.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(d.J,{className:"text-zinc-300 flex items-center gap-2",children:[(0,t.jsx)(j.A,{className:"w-4 h-4"})," Nome Completo *"]}),(0,t.jsx)(l.p,{value:T.name,onChange:e=>W({...T,name:e.target.value}),className:"bg-zinc-800 border-zinc-700 text-zinc-100 mt-1",placeholder:"Jo\xe3o Silva"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(d.J,{className:"text-zinc-300 flex items-center gap-2",children:[(0,t.jsx)(p.A,{className:"w-4 h-4"})," CPF/CNPJ *"]}),(0,t.jsx)(l.p,{value:T.cpfCnpj,onChange:e=>W({...T,cpfCnpj:e.target.value}),className:"bg-zinc-800 border-zinc-700 text-zinc-100 mt-1",placeholder:"000.000.000-00"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(d.J,{className:"text-zinc-300 flex items-center gap-2",children:[(0,t.jsx)(z.A,{className:"w-4 h-4"})," Email *"]}),(0,t.jsx)(l.p,{type:"email",value:T.email,onChange:e=>W({...T,email:e.target.value}),className:"bg-zinc-800 border-zinc-700 text-zinc-100 mt-1",placeholder:"email@exemplo.com"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(d.J,{className:"text-zinc-300 flex items-center gap-2",children:[(0,t.jsx)(w.A,{className:"w-4 h-4"})," Telefone"]}),(0,t.jsx)(l.p,{value:T.phone,onChange:e=>W({...T,phone:e.target.value}),className:"bg-zinc-800 border-zinc-700 text-zinc-100 mt-1",placeholder:"(11) 99999-9999"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(d.J,{className:"text-zinc-300 flex items-center gap-2",children:[(0,t.jsx)(C.A,{className:"w-4 h-4"})," Data Nascimento"]}),(0,t.jsx)(l.p,{type:"date",value:T.birthDate,onChange:e=>W({...T,birthDate:e.target.value}),className:"bg-zinc-800 border-zinc-700 text-zinc-100 mt-1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(d.J,{className:"text-zinc-300 flex items-center gap-2",children:[(0,t.jsx)(y.A,{className:"w-4 h-4"})," CEP"]}),(0,t.jsx)(l.p,{value:T.postalCode,onChange:e=>W({...T,postalCode:e.target.value}),className:"bg-zinc-800 border-zinc-700 text-zinc-100 mt-1",placeholder:"00000-000"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsx)(d.J,{className:"text-zinc-300",children:"Endere\xe7o"}),(0,t.jsx)(l.p,{value:T.address,onChange:e=>W({...T,address:e.target.value}),className:"bg-zinc-800 border-zinc-700 text-zinc-100 mt-1",placeholder:"Rua Exemplo"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(d.J,{className:"text-zinc-300",children:"N\xfamero"}),(0,t.jsx)(l.p,{value:T.addressNumber,onChange:e=>W({...T,addressNumber:e.target.value}),className:"bg-zinc-800 border-zinc-700 text-zinc-100 mt-1",placeholder:"123"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(d.J,{className:"text-zinc-300",children:"Bairro"}),(0,t.jsx)(l.p,{value:T.province,onChange:e=>W({...T,province:e.target.value}),className:"bg-zinc-800 border-zinc-700 text-zinc-100 mt-1",placeholder:"Centro"})]}),_&&(0,t.jsx)("p",{className:"text-red-400 text-sm",children:_}),(0,t.jsxs)(i.$,{onClick:G,disabled:B||!T.name||!T.cpfCnpj||!T.email,className:"w-full bg-emerald-600 hover:bg-emerald-700",children:[B?(0,t.jsx)(m.A,{className:"w-4 h-4 mr-2 animate-spin"}):(0,t.jsx)(u.A,{className:"w-4 h-4 mr-2"}),"Criar Subconta"]})]})]})})]})}},85501:(e,a,s)=>{"use strict";s.d(a,{J:()=>r,R:()=>n});var t=s(12115);let n=(0,t.createContext)(null),r=()=>(0,t.useContext)(n)},86948:(e,a,s)=>{"use strict";s.d(a,{BT:()=>l,Wu:()=>d,ZB:()=>i,Zp:()=>r,aR:()=>c});var t=s(95155);s(12115);var n=s(64269);function r(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"card",className:(0,n.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...s})}function c(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,n.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...s})}function i(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,n.cn)("leading-none font-semibold",a),...s})}function l(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,n.cn)("text-muted-foreground text-sm",a),...s})}function d(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,n.cn)("px-6",a),...s})}}},e=>{e.O(0,[779,32,429,871,691,441,255,358],()=>e(e.s=67187)),_N_E=e.O()}]);