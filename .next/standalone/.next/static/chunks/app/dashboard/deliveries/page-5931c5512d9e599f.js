(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[622],{1524:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},3998:(e,t,s)=>{"use strict";s.d(t,{$:()=>l});var a=s(95155);s(12115);var r=s(32467),n=s(83101),i=s(64269);let c=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:t,variant:s="default",size:n="default",asChild:l=!1,...o}=e,d=l?r.DX:"button";return(0,a.jsx)(d,{"data-slot":"button","data-variant":s,"data-size":n,className:(0,i.cn)(c({variant:s,size:n,className:t})),...o})}},11186:(e,t,s)=>{"use strict";s.d(t,{bq:()=>p,eb:()=>g,gC:()=>x,l6:()=>d,yv:()=>u});var a=s(95155),r=s(12115),n=s(13306),i=s(24033),c=s(12108),l=s(5917),o=s(64269);let d=n.bL;n.YJ;let u=n.WT,p=r.forwardRef((e,t)=>{let{className:s,children:r,...c}=e;return(0,a.jsxs)(n.l9,{ref:t,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-sm text-zinc-100 ring-offset-zinc-950 placeholder:text-zinc-500 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...c,children:[r,(0,a.jsx)(n.In,{asChild:!0,children:(0,a.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]})});p.displayName=n.l9.displayName;let m=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.PP,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(c.A,{className:"h-4 w-4"})})});m.displayName=n.PP.displayName;let h=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.wn,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(i.A,{className:"h-4 w-4"})})});h.displayName=n.wn.displayName;let x=r.forwardRef((e,t)=>{let{className:s,children:r,position:i="popper",...c}=e;return(0,a.jsx)(n.ZL,{children:(0,a.jsxs)(n.UC,{ref:t,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border border-zinc-700 bg-zinc-800 text-zinc-100 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:i,...c,children:[(0,a.jsx)(m,{}),(0,a.jsx)(n.LM,{className:(0,o.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(h,{})]})})});x.displayName=n.UC.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.JU,{ref:t,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...r})}).displayName=n.JU.displayName;let g=r.forwardRef((e,t)=>{let{className:s,children:r,...i}=e;return(0,a.jsxs)(n.q7,{ref:t,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-zinc-700 focus:text-zinc-100 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...i,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(n.VF,{children:(0,a.jsx)(l.A,{className:"h-4 w-4"})})}),(0,a.jsx)(n.p4,{children:r})]})});g.displayName=n.q7.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.wv,{ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-zinc-700",s),...r})}).displayName=n.wv.displayName},26617:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},31120:(e,t,s)=>{"use strict";s.d(t,{T:()=>i});var a=s(95155),r=s(12115),n=s(64269);let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...r})});i.displayName="Textarea"},42529:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},64269:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var a=s(2821),r=s(75889);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}},65142:(e,t,s)=>{"use strict";s.d(t,{p:()=>n});var a=s(95155);s(12115);var r=s(64269);function n(e){let{className:t,type:s,...n}=e;return(0,a.jsx)("input",{type:s,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}},66008:(e,t,s)=>{Promise.resolve().then(s.bind(s,77138))},76444:(e,t,s)=>{"use strict";s.d(t,{J:()=>i});var a=s(95155);s(12115);var r=s(46554),n=s(64269);function i(e){let{className:t,...s}=e;return(0,a.jsx)(r.b,{"data-slot":"label",className:(0,n.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...s})}},77138:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var a=s(95155),r=s(12115),n=s(90960),i=s(3998),c=s(86948),l=s(65142),o=s(76444),d=s(11186);let u=(0,s(71847).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var p=s(35299),m=s(42529),h=s(78874),x=s(26617),g=s(1524),f=s(31120);function y(){let[e,t]=(0,r.useState)([]),[s,y]=(0,r.useState)(null),[b,v]=(0,r.useState)(!0),[j,N]=(0,r.useState)("all"),[w,z]=(0,r.useState)(null),[S,q]=(0,r.useState)(!1),[P,A]=(0,r.useState)(""),[T,k]=(0,r.useState)(""),[O,C]=(0,r.useState)(!1);(0,r.useEffect)(()=>{E()},[j]);let E=async()=>{try{v(!0);let[e,s]=await Promise.all([n.F.getDeliveries("all"!==j?j:void 0),n.F.getDeliveryStats()]);t(e),y(s)}catch(e){console.error(e)}finally{v(!1)}},J=async(e,t)=>{try{C(!0),await n.F.updateDeliveryStatus(e,{status:t,proofUrl:"completed"===t?P:void 0,notes:T||void 0}),q(!1),A(""),k(""),z(null),await E()}catch(e){console.error(e),alert(e instanceof Error?e.message:"Erro ao atualizar status")}finally{C(!1)}};return b?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)(p.A,{className:"w-8 h-8 animate-spin text-emerald-500"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-zinc-100",children:"Entregas"}),(0,a.jsx)("p",{className:"text-zinc-400 mt-1",children:"Gerencie todas as entregas de Robux e Gamepasses"})]}),s&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsx)(c.Zp,{className:"bg-zinc-900 border-zinc-800",children:(0,a.jsx)(c.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-zinc-400",children:"Total"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-zinc-100",children:s.total})]}),(0,a.jsx)(x.A,{className:"w-8 h-8 text-zinc-500"})]})})}),(0,a.jsx)(c.Zp,{className:"bg-zinc-900 border-zinc-800",children:(0,a.jsx)(c.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-zinc-400",children:"Pendentes"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-yellow-400",children:s.pending})]}),(0,a.jsx)(u,{className:"w-8 h-8 text-yellow-500"})]})})}),(0,a.jsx)(c.Zp,{className:"bg-zinc-900 border-zinc-800",children:(0,a.jsx)(c.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-zinc-400",children:"Conclu\xeddas"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-400",children:s.completed})]}),(0,a.jsx)(m.A,{className:"w-8 h-8 text-green-500"})]})})}),(0,a.jsx)(c.Zp,{className:"bg-zinc-900 border-zinc-800",children:(0,a.jsx)(c.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-zinc-400",children:"Tempo M\xe9dio"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-blue-400",children:[Math.round(s.avgDeliveryTimeMinutes||0),"m"]})]}),(0,a.jsx)(g.A,{className:"w-8 h-8 text-blue-500"})]})})})]}),(0,a.jsx)(c.Zp,{className:"bg-zinc-900 border-zinc-800",children:(0,a.jsx)(c.Wu,{className:"pt-6",children:(0,a.jsx)("div",{className:"flex gap-4",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(o.J,{children:"Filtrar por Status"}),(0,a.jsxs)(d.l6,{value:j,onValueChange:N,children:[(0,a.jsx)(d.bq,{className:"bg-zinc-800 border-zinc-700",children:(0,a.jsx)(d.yv,{})}),(0,a.jsxs)(d.gC,{className:"bg-zinc-800 border-zinc-700",children:[(0,a.jsx)(d.eb,{value:"all",children:"Todos"}),(0,a.jsx)(d.eb,{value:"pending",children:"Pendentes"}),(0,a.jsx)(d.eb,{value:"in_progress",children:"Em Progresso"}),(0,a.jsx)(d.eb,{value:"completed",children:"Conclu\xeddas"}),(0,a.jsx)(d.eb,{value:"failed",children:"Falhadas"})]})]})]})})})}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-4",children:0===e.length?(0,a.jsx)(c.Zp,{className:"bg-zinc-900 border-zinc-800",children:(0,a.jsxs)(c.Wu,{className:"py-12 text-center text-zinc-500",children:[(0,a.jsx)(x.A,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),"Nenhuma entrega encontrada"]})}):e.map(e=>(0,a.jsxs)(c.Zp,{className:"bg-zinc-900 border-zinc-800",children:[(0,a.jsx)(c.aR,{children:(0,a.jsx)("div",{className:"flex items-start justify-between",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)(c.ZB,{className:"text-lg flex items-center gap-2",children:["robux"===e.type?"\uD83D\uDC8E":"\uD83C\uDFAE"," ",e.robloxUsername,(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs rounded border ".concat((e=>{switch(e){case"pending":return"bg-yellow-500/10 text-yellow-400 border-yellow-500/20";case"in_progress":return"bg-blue-500/10 text-blue-400 border-blue-500/20";case"completed":return"bg-green-500/10 text-green-400 border-green-500/20";case"failed":return"bg-red-500/10 text-red-400 border-red-500/20";default:return"bg-zinc-500/10 text-zinc-400 border-zinc-500/20"}})(e.status)),children:[(e=>{switch(e){case"pending":return(0,a.jsx)(u,{className:"w-4 h-4"});case"in_progress":return(0,a.jsx)(p.A,{className:"w-4 h-4 animate-spin"});case"completed":return(0,a.jsx)(m.A,{className:"w-4 h-4"});case"failed":return(0,a.jsx)(h.A,{className:"w-4 h-4"});default:return(0,a.jsx)(x.A,{className:"w-4 h-4"})}})(e.status),(e=>{switch(e){case"pending":return"Pendente";case"in_progress":return"Em Progresso";case"completed":return"Conclu\xedda";case"failed":return"Falhou";default:return e}})(e.status)]})]}),(0,a.jsxs)("p",{className:"text-sm text-zinc-400 mt-1",children:["ID: #",e.id," â€¢ Criado: ",new Date(e.createdAt).toLocaleString("pt-BR")]})]})})}),(0,a.jsxs)(c.Wu,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-zinc-500",children:"Tipo"}),(0,a.jsx)("p",{className:"text-zinc-100 font-medium",children:"robux"===e.type?"Robux":"Gamepass"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-zinc-500",children:"Quantidade"}),(0,a.jsx)("p",{className:"text-zinc-100 font-medium",children:e.robuxAmount?"".concat(e.robuxAmount," Robux"):"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-zinc-500",children:"Valor"}),(0,a.jsxs)("p",{className:"text-zinc-100 font-medium",children:["R$ ",e.value.toFixed(2)]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-zinc-500",children:"Roblox ID"}),(0,a.jsx)("p",{className:"text-zinc-100 font-medium",children:e.robloxUserId||"N/A"})]})]}),e.notes&&(0,a.jsxs)("div",{className:"bg-zinc-800/50 rounded p-3",children:[(0,a.jsx)("p",{className:"text-xs text-zinc-500 mb-1",children:"Observa\xe7\xf5es:"}),(0,a.jsx)("p",{className:"text-sm text-zinc-300",children:e.notes})]}),(0,a.jsxs)("div",{className:"flex gap-2 pt-2",children:["pending"===e.status&&(0,a.jsx)(i.$,{onClick:()=>J(e.id,"in_progress"),size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:"Iniciar Entrega"}),"in_progress"===e.status&&(0,a.jsxs)(i.$,{onClick:()=>{z(e),A(e.proofUrl||""),k(e.notes||""),q(!0)},size:"sm",className:"bg-green-600 hover:bg-green-700",children:[(0,a.jsx)(m.A,{className:"w-4 h-4 mr-1"}),"Concluir"]}),e.proofUrl&&(0,a.jsx)(i.$,{onClick:()=>window.open(e.proofUrl,"_blank"),size:"sm",variant:"outline",children:"Ver Comprovante"})]})]})]},e.id))}),S&&w&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)(c.Zp,{className:"bg-zinc-900 border-zinc-800 w-full max-w-md",children:[(0,a.jsx)(c.aR,{children:(0,a.jsxs)(c.ZB,{children:["Concluir Entrega #",w.id]})}),(0,a.jsxs)(c.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{children:"URL do Comprovante (Opcional)"}),(0,a.jsx)(l.p,{value:P,onChange:e=>A(e.target.value),className:"bg-zinc-800 border-zinc-700",placeholder:"https://imgur.com/..."})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{children:"Observa\xe7\xf5es (Opcional)"}),(0,a.jsx)(f.T,{value:T,onChange:e=>k(e.target.value),className:"bg-zinc-800 border-zinc-700 min-h-[80px]",placeholder:"Detalhes sobre a entrega..."})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(i.$,{onClick:()=>J(w.id,"completed"),disabled:O,className:"flex-1 bg-green-600 hover:bg-green-700",children:[O?(0,a.jsx)(p.A,{className:"w-4 h-4 mr-2 animate-spin"}):(0,a.jsx)(m.A,{className:"w-4 h-4 mr-2"}),"Confirmar"]}),(0,a.jsx)(i.$,{onClick:()=>{q(!1),z(null),A(""),k("")},variant:"outline",disabled:O,children:"Cancelar"})]})]})]})})]})}},78874:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},86948:(e,t,s)=>{"use strict";s.d(t,{BT:()=>l,Wu:()=>o,ZB:()=>c,Zp:()=>n,aR:()=>i});var a=s(95155);s(12115);var r=s(64269);function n(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...s})}function i(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function c(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",t),...s})}function l(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",t),...s})}function o(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",t),...s})}},90960:(e,t,s)=>{"use strict";s.d(t,{F:()=>n});let a=s(95704).env.NEXT_PUBLIC_API_URL||"https://neweraapi.squareweb.app";class r{async sleep(e){return new Promise(t=>setTimeout(t,e))}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s={"Content-Type":"application/json",...t.headers},r=null;for(let i=0;i<this.maxRetries;i++)try{let n=new AbortController,c=setTimeout(()=>n.abort(),3e4),l=await fetch("".concat(a).concat(e),{...t,headers:s,credentials:"include",signal:n.signal});if(clearTimeout(c),401===l.status)throw e.includes("/login")||(window.location.href="/login"),Error("N\xe3o autorizado");if(!l.ok){let e=await l.text();if(l.status>=500&&i<this.maxRetries-1){r=Error(e||"Erro ".concat(l.status)),await this.sleep(this.retryDelay*(i+1));continue}throw window.dispatchEvent(new Event("api-offline")),Error(e||"Erro ".concat(l.status))}if(window.dispatchEvent(new Event("api-online")),204===l.status)return{};return l.json()}catch(e){var n;if(("AbortError"===e.name||(null==(n=e.message)?void 0:n.includes("fetch")))&&i<this.maxRetries-1){console.warn("API request failed (attempt ".concat(i+1,"/").concat(this.maxRetries,"):"),e.message),r=e,await this.sleep(this.retryDelay*(i+1));continue}throw e}throw window.dispatchEvent(new Event("api-offline")),r||Error("Falha ao conectar com a API ap\xf3s m\xfaltiplas tentativas")}async login(e,t){return this.request("/api/admin/login",{method:"POST",body:JSON.stringify({email:e,password:t})})}async logout(){await this.request("/api/admin/logout",{method:"POST"})}async healthCheck(){try{return(await fetch("".concat(a,"/health"),{method:"GET",cache:"no-store"})).ok}catch(e){return!1}}async getCurrentUser(){return this.request("/api/admin/me")}async isAuthenticated(){try{return await this.getCurrentUser(),!0}catch(e){return!1}}async getGames(){return this.request("/api/games")}async getGame(e){return this.request("/api/games/".concat(e))}async createGame(e){return this.request("/api/games",{method:"POST",body:JSON.stringify(e)})}async updateGame(e,t){return this.request("/api/games/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteGame(e){return this.request("/api/games/".concat(e),{method:"DELETE"})}async getProducts(e){return this.request("/api/products/game/".concat(e))}async createProduct(e){return this.request("/api/products",{method:"POST",body:JSON.stringify(e)})}async deleteProduct(e){return this.request("/api/products/".concat(e),{method:"DELETE"})}async refreshProductImage(e){return this.request("/api/roblox/refresh-product-image/".concat(e),{method:"POST"})}async updateProduct(e,t){return this.request("/api/products/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async getSalesStats(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7;return this.request("/api/payments/stats/period?days=".concat(e))}async getSales(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,s=arguments.length>2?arguments[2]:void 0,a=new URLSearchParams({page:String(e),limit:String(t)});return s&&a.append("days",String(s)),this.request("/api/payments/sales?".concat(a))}async getConfig(){return this.request("/api/config")}async updateConfig(e){return this.request("/api/config",{method:"PUT",body:JSON.stringify(e)})}async notifyBotUpdate(){return this.request("/api/bot/notify-update",{method:"POST"})}async processPlaceholders(e,t){return(await this.request("/api/config/process-placeholders",{method:"POST",body:JSON.stringify({text:e,gamesList:t})})).processedText}async getUsers(){return this.request("/api/admin/users")}async createUser(e){return this.request("/api/admin/register",{method:"POST",body:JSON.stringify(e)})}async deleteUser(e){return this.request("/api/admin/users/".concat(e),{method:"DELETE"})}async updateUser(e,t){return this.request("/api/admin/users/".concat(e),{method:"PATCH",body:JSON.stringify(t)})}async uploadImage(e){let t=new FormData;t.append("file",e);let s=await fetch("".concat(a,"/api/upload/image"),{method:"POST",credentials:"include",body:t});if(!s.ok)throw Error((await s.json()).error||"Erro ao fazer upload da imagem");return s.json()}async changePassword(e,t){return this.request("/api/admin/users/".concat(e,"/change-password"),{method:"POST",body:JSON.stringify(t)})}async getAllowedRoles(){return this.request("/api/admin/allowed-roles")}async getStats(){return this.request("/api/stats")}async syncRoblox(e){return this.request("/api/roblox/sync",{method:"POST",body:JSON.stringify({placeIdOrUrl:e})})}async importGamepass(e,t){return this.request("/api/roblox/import-gamepass",{method:"POST",body:JSON.stringify({gameId:e,gamepassIdOrUrl:t})})}async getPartners(){return this.request("/api/partners")}async getPartner(e){return this.request("/api/partners/".concat(e))}async updatePartner(e,t){return this.request("/api/partners/".concat(e),{method:"PATCH",body:JSON.stringify(t)})}async createPartner(e){return this.request("/api/partners",{method:"POST",body:JSON.stringify(e)})}async deletePartner(e){return this.request("/api/partners/".concat(e),{method:"DELETE"})}async getAsaasSubaccounts(){return this.request("/api/asaas/subaccounts")}async createAsaasSubaccount(e){return this.request("/api/asaas/subaccounts",{method:"POST",body:JSON.stringify(e)})}async getAsaasBalance(){return this.request("/api/asaas/balance")}async getAsaasAccount(){try{return await this.request("/api/asaas/account")}catch(e){return null}}async getDiscordServerData(){let e=await this.request("/api/discord/server");return e.synced&&e.data||null}async getCoupons(){return this.request("/api/coupons")}async getCoupon(e){return this.request("/api/coupons/".concat(e))}async createCoupon(e){return this.request("/api/coupons",{method:"POST",body:JSON.stringify(e)})}async updateCoupon(e,t){return this.request("/api/coupons/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteCoupon(e){return this.request("/api/coupons/".concat(e),{method:"DELETE"})}async validateCoupon(e){return this.request("/api/coupons/validate",{method:"POST",body:JSON.stringify({code:e})})}async getAsaasCustomers(){return this.request("/api/asaas/customers")}async createAsaasCustomer(e){return this.request("/api/asaas/customers",{method:"POST",body:JSON.stringify(e)})}async getDeliveries(e){return this.request(e?"/api/deliveries?status=".concat(e):"/api/deliveries")}async getDelivery(e){return this.request("/api/deliveries/".concat(e))}async getDeliveryStats(){return this.request("/api/deliveries/stats")}async updateDeliveryStatus(e,t){return this.request("/api/deliveries/".concat(e,"/status"),{method:"PUT",body:JSON.stringify(t)})}async uploadDeliveryProof(e,t){return this.request("/api/deliveries/".concat(e,"/proof"),{method:"PUT",body:JSON.stringify({proofUrl:t})})}async getSellers(){return this.request("/api/sellers")}async getSeller(e){return this.request("/api/sellers/".concat(e))}async updateSeller(e,t){return this.request("/api/sellers/".concat(e),{method:"PATCH",body:JSON.stringify(t)})}constructor(){this.maxRetries=3,this.retryDelay=1e3}}let n=new r}},e=>{e.O(0,[779,32,631,441,255,358],()=>e(e.s=66008)),_N_E=e.O()}]);