(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{53710:(e,s,t)=>{Promise.resolve().then(t.bind(t,60116))},60116:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>P});var a=t(95155),r=t(12115),l=t(85501),i=t(36118),n=t(1733),c=t(26497),d=t(35299),o=t(16485),x=t(24033),m=t(42529),h=t(6132),u=t(26983),p=t(91761),g=t(26617),b=t(50906),j=t(52987),N=t(56154),v=t(15870),f=t(93499),w=t(1524),y=t(52619),A=t.n(y);let E={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.08}}},z={hidden:{opacity:0,y:20},show:{opacity:1,y:0}},D=[{value:1,label:"Hoje",shortLabel:"1d"},{value:3,label:"\xdaltimos 3 dias",shortLabel:"3d"},{value:7,label:"\xdaltimos 7 dias",shortLabel:"7d"},{value:15,label:"\xdaltimos 15 dias",shortLabel:"15d"},{value:30,label:"\xdaltimos 30 dias",shortLabel:"30d"},{value:60,label:"\xdaltimos 60 dias",shortLabel:"60d"},{value:90,label:"\xdaltimos 90 dias",shortLabel:"90d"}];function P(){var e;let s=(0,r.useContext)(l.R),[t,y]=(0,r.useState)(null),[P,L]=(0,r.useState)(!0),[I,C]=(0,r.useState)("loading"),[R,k]=(0,r.useState)(D[0]),[S,M]=(0,r.useState)(!1),[F,O]=(0,r.useState)([]);(0,r.useEffect)(()=>{T(),_()},[R]);let T=async()=>{try{var e;L(!0);let s=await i.FH.get("/api/orders/my"),t=Array.isArray(s.data)?s.data:(null==(e=s.data)?void 0:e.orders)||[],a=new Date;a.setDate(a.getDate()-R.value),a.setHours(0,0,0,0);let r=t.filter(e=>new Date(e.paidAt||e.createdAt||"")>=a),l=r.reduce((e,s)=>e+(s.finalPrice||0),0),n=t.filter(e=>"PAYMENT_CONFIRMED"===e.status||"ASSIGNED"===e.status).length,c=r.filter(e=>"DELIVERED"===e.status||"COMPLETED"===e.status).length,d=r.sort((e,s)=>new Date(s.createdAt||"").getTime()-new Date(e.createdAt||"").getTime()).slice(0,5).map(e=>({orderId:e.orderId||0,status:e.status||"",buyerRobloxUsername:e.buyerRobloxUsername||"",robuxAmount:e.robuxAmount||0,finalPrice:e.finalPrice||0,createdAt:e.createdAt||""}));O(d),y({periodOrders:r.length,periodRevenue:l,pendingDeliveries:n,completedPeriod:c})}catch(e){console.error("Error loading stats:",e),y({periodOrders:0,periodRevenue:0,pendingDeliveries:0,completedPeriod:0})}finally{L(!1)}},_=async()=>{try{await i.FH.getConfig(),C("online")}catch(e){C("offline")}};return P?(0,a.jsx)("div",{className:"flex items-center justify-center h-[60vh]",children:(0,a.jsx)(d.A,{className:"w-8 h-8 animate-spin text-cyan-500"})}):(0,a.jsxs)(n.P.div,{className:"space-y-6",variants:E,initial:"hidden",animate:"show",children:[(0,a.jsxs)(n.P.div,{variants:z,className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold text-white",children:[(()=>{let e=new Date().getHours();return e<12?"Bom dia":e<18?"Boa tarde":"Boa noite"})(),", ",(0,a.jsx)("span",{className:"gradient-text",children:(null==s||null==(e=s.name)?void 0:e.split(" ")[0])||"Usu\xe1rio"})]}),(0,a.jsx)("p",{className:"text-zinc-500 text-sm mt-0.5",children:new Date().toLocaleDateString("pt-BR",{weekday:"long",day:"numeric",month:"long"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)(n.P.button,{onClick:()=>M(!S),whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-zinc-800/80 border border-zinc-700/50 text-sm font-medium text-white hover:border-cyan-500/30 transition-all",children:[(0,a.jsx)(o.A,{className:"w-4 h-4 text-cyan-400"}),(0,a.jsx)("span",{children:R.label}),(0,a.jsx)(n.P.div,{animate:{rotate:180*!!S},transition:{duration:.2},children:(0,a.jsx)(x.A,{className:"w-4 h-4 text-zinc-400"})})]}),(0,a.jsx)(c.N,{children:S&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>M(!1)}),(0,a.jsx)(n.P.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.15},className:"absolute right-0 top-full mt-2 z-50 w-48 py-2 rounded-xl bg-zinc-900 border border-zinc-700/50 shadow-xl shadow-black/40",children:D.map(e=>(0,a.jsxs)("button",{onClick:()=>{k(e),M(!1)},className:"w-full flex items-center justify-between px-4 py-2 text-sm transition-colors ".concat(R.value===e.value?"bg-cyan-500/10 text-cyan-400":"text-zinc-300 hover:bg-zinc-800 hover:text-white"),children:[(0,a.jsx)("span",{children:e.label}),R.value===e.value&&(0,a.jsx)(m.A,{className:"w-4 h-4"})]},e.value))})]})})]}),(0,a.jsx)("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-medium ".concat("online"===I?"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20":"offline"===I?"bg-red-500/10 text-red-400 border border-red-500/20":"bg-zinc-500/10 text-zinc-400 border border-zinc-500/20"),children:"online"===I?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-400 animate-pulse"})," API Online"]}):"offline"===I?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.A,{className:"w-3 h-3"})," API Offline"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.A,{className:"w-3 h-3 animate-spin"})," Verificando"]})})]})]}),(0,a.jsxs)(n.P.div,{variants:z,className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsx)(A(),{href:"/dashboard/orders?status=pending",className:"group",children:(0,a.jsx)("div",{className:"glass-card p-4 hover-card border-l-2 border-l-amber-500",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-zinc-500 uppercase tracking-wide",children:"Pendentes"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-white mt-1",children:(null==t?void 0:t.pendingDeliveries)||0})]}),(0,a.jsx)("div",{className:"p-2 rounded-lg bg-amber-500/10",children:(0,a.jsx)(u.A,{className:"w-5 h-5 text-amber-400"})})]})})}),(0,a.jsx)("div",{className:"glass-card p-4 border-l-2 border-l-emerald-500",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-xs text-zinc-500 uppercase tracking-wide flex items-center gap-1",children:["Faturamento",(0,a.jsxs)("span",{className:"text-cyan-400/70",children:["(",R.shortLabel,")"]})]}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-white mt-1",children:["R$ ",((null==t?void 0:t.periodRevenue)||0).toLocaleString("pt-BR",{minimumFractionDigits:0,maximumFractionDigits:0})]})]}),(0,a.jsx)("div",{className:"p-2 rounded-lg bg-emerald-500/10",children:(0,a.jsx)(p.A,{className:"w-5 h-5 text-emerald-400"})})]})}),(0,a.jsx)("div",{className:"glass-card p-4 border-l-2 border-l-cyan-500",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-xs text-zinc-500 uppercase tracking-wide flex items-center gap-1",children:["Pedidos",(0,a.jsxs)("span",{className:"text-cyan-400/70",children:["(",R.shortLabel,")"]})]}),(0,a.jsx)("p",{className:"text-2xl font-bold text-white mt-1",children:(null==t?void 0:t.periodOrders)||0})]}),(0,a.jsx)("div",{className:"p-2 rounded-lg bg-cyan-500/10",children:(0,a.jsx)(g.A,{className:"w-5 h-5 text-cyan-400"})})]})}),(0,a.jsx)("div",{className:"glass-card p-4 border-l-2 border-l-purple-500",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-xs text-zinc-500 uppercase tracking-wide flex items-center gap-1",children:["Entregues",(0,a.jsxs)("span",{className:"text-cyan-400/70",children:["(",R.shortLabel,")"]})]}),(0,a.jsx)("p",{className:"text-2xl font-bold text-white mt-1",children:(null==t?void 0:t.completedPeriod)||0})]}),(0,a.jsx)("div",{className:"p-2 rounded-lg bg-purple-500/10",children:(0,a.jsx)(m.A,{className:"w-5 h-5 text-purple-400"})})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsx)(n.P.div,{variants:z,className:"lg:col-span-2",children:(0,a.jsxs)("div",{className:"glass-card p-5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h2",{className:"font-semibold text-white flex items-center gap-2",children:[(0,a.jsx)(b.A,{className:"w-4 h-4 text-cyan-400"}),"Pedidos Recentes",(0,a.jsxs)("span",{className:"text-xs font-normal text-zinc-500",children:["(",R.label.toLowerCase(),")"]})]}),(0,a.jsxs)(A(),{href:"/dashboard/orders",className:"text-xs text-cyan-400 hover:text-cyan-300 flex items-center gap-1",children:["Ver todos ",(0,a.jsx)(j.A,{className:"w-3 h-3"})]})]}),0===F.length?(0,a.jsxs)("div",{className:"text-center py-8 text-zinc-500",children:[(0,a.jsx)(g.A,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),(0,a.jsx)("p",{className:"text-sm",children:"Nenhum pedido ainda"})]}):(0,a.jsx)("div",{className:"space-y-2",children:F.map(e=>{var s;return(0,a.jsxs)(A(),{href:"/dashboard/orders?id=".concat(e.orderId),className:"flex items-center justify-between p-3 rounded-lg bg-zinc-800/30 hover:bg-zinc-800/60 transition-colors group",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"w-8 h-8 rounded-lg bg-zinc-700/50 flex items-center justify-center text-xs font-mono text-zinc-400",children:["#",e.orderId]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-white group-hover:text-cyan-400 transition-colors",children:e.buyerRobloxUsername}),(0,a.jsxs)("p",{className:"text-xs text-zinc-500",children:[e.robuxAmount.toLocaleString()," R$ â€¢ R$ ",e.finalPrice.toFixed(2)]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"px-2 py-0.5 rounded text-xs font-medium ".concat({PAYMENT_PENDING:"text-yellow-400 bg-yellow-500/10",PAYMENT_CONFIRMED:"text-blue-400 bg-blue-500/10",ASSIGNED:"text-purple-400 bg-purple-500/10",DELIVERING:"text-orange-400 bg-orange-500/10",DELIVERED:"text-emerald-400 bg-emerald-500/10",COMPLETED:"text-emerald-400 bg-emerald-500/10",CANCELLED:"text-red-400 bg-red-500/10",EXPIRED:"text-zinc-400 bg-zinc-500/10"}[e.status]||"text-zinc-400 bg-zinc-500/10"),children:{PAYMENT_PENDING:"Aguardando",PAYMENT_CONFIRMED:"Pago",ASSIGNED:"Atribu\xeddo",DELIVERING:"Entregando",DELIVERED:"Entregue",COMPLETED:"Conclu\xeddo",CANCELLED:"Cancelado",EXPIRED:"Expirado"}[s=e.status]||s}),(0,a.jsx)("span",{className:"text-xs text-zinc-600",children:(e=>{let s=new Date(e),t=Math.floor((new Date().getTime()-s.getTime())/6e4),a=Math.floor(t/60),r=Math.floor(a/24);return t<1?"agora":t<60?"".concat(t,"min"):a<24?"".concat(a,"h"):"".concat(r,"d")})(e.createdAt)})]})]},e.orderId)})})]})}),(0,a.jsx)(n.P.div,{variants:z,children:(0,a.jsxs)("div",{className:"glass-card p-5",children:[(0,a.jsxs)("h2",{className:"font-semibold text-white flex items-center gap-2 mb-4",children:[(0,a.jsx)(N.A,{className:"w-4 h-4 text-amber-400"}),"A\xe7\xf5es R\xe1pidas"]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(null==t?void 0:t.pendingDeliveries)?(0,a.jsx)(A(),{href:"/dashboard/orders?status=pending",className:"block",children:(0,a.jsx)("div",{className:"p-3 rounded-lg bg-amber-500/10 border border-amber-500/20 hover:bg-amber-500/20 transition-colors group",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(u.A,{className:"w-4 h-4 text-amber-400"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-amber-200",children:[t.pendingDeliveries," entregas pendentes"]})]}),(0,a.jsx)(j.A,{className:"w-4 h-4 text-amber-400 group-hover:translate-x-1 transition-transform"})]})})}):null,(0,a.jsx)(A(),{href:"/dashboard/config",className:"block",children:(0,a.jsxs)("div",{className:"p-3 rounded-lg bg-zinc-800/50 hover:bg-zinc-800 transition-colors group flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(v.A,{className:"w-4 h-4 text-zinc-400"}),(0,a.jsx)("span",{className:"text-sm text-zinc-300",children:"Personalizar Bot"})]}),(0,a.jsx)(j.A,{className:"w-4 h-4 text-zinc-500 group-hover:translate-x-1 transition-transform"})]})}),(0,a.jsx)(A(),{href:"/dashboard/integrations",className:"block",children:(0,a.jsxs)("div",{className:"p-3 rounded-lg bg-zinc-800/50 hover:bg-zinc-800 transition-colors group flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(f.A,{className:"w-4 h-4 text-zinc-400"}),(0,a.jsx)("span",{className:"text-sm text-zinc-300",children:"Integra\xe7\xf5es"})]}),(0,a.jsx)(j.A,{className:"w-4 h-4 text-zinc-500 group-hover:translate-x-1 transition-transform"})]})}),(0,a.jsx)(A(),{href:"/dashboard/coupons",className:"block",children:(0,a.jsxs)("div",{className:"p-3 rounded-lg bg-zinc-800/50 hover:bg-zinc-800 transition-colors group flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(w.A,{className:"w-4 h-4 text-zinc-400"}),(0,a.jsx)("span",{className:"text-sm text-zinc-300",children:"Gerenciar Cupons"})]}),(0,a.jsx)(j.A,{className:"w-4 h-4 text-zinc-500 group-hover:translate-x-1 transition-transform"})]})})]})]})})]})]})}},85501:(e,s,t)=>{"use strict";t.d(s,{J:()=>l,R:()=>r});var a=t(12115);let r=(0,a.createContext)(null),l=()=>(0,a.useContext)(r)}},e=>{e.O(0,[733,619,632,118,441,255,358],()=>e(e.s=53710)),_N_E=e.O()}]);