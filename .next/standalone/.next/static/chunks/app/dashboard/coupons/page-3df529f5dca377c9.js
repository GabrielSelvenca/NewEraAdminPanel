(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[621],{6191:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(71847).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},16485:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(71847).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},19204:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(71847).A)("percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]])},37107:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(71847).A)("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]])},65142:(e,s,a)=>{"use strict";a.d(s,{p:()=>i});var t=a(95155);a(12115);var r=a(64269);function i(e){let{className:s,type:a,...i}=e;return(0,t.jsx)("input",{type:a,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),...i})}},71360:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(71847).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},72188:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>j});var t=a(95155),r=a(12115),i=a(90960),c=a(3998),l=a(86948),n=a(65142),d=a(76444),o=a(11186),x=a(35299),p=a(6191),m=a(82063),u=a(71360),h=a(19204),y=a(91761),g=a(16485),v=a(37107);function j(){let[e,s]=(0,r.useState)([]),[a,j]=(0,r.useState)(!0),[b,N]=(0,r.useState)(!1),[f,k]=(0,r.useState)(!1),[A,w]=(0,r.useState)({code:"",discountType:"percentage",discountValue:0,expiresAt:"",maxUses:""});(0,r.useEffect)(()=>{z()},[]);let z=async()=>{try{j(!0);let e=await i.F.getCoupons();s(e)}catch(e){console.error(e)}finally{j(!1)}},C=async()=>{if(!A.code||A.discountValue<=0)return void alert("Preencha todos os campos obrigat\xf3rios");try{N(!0),await i.F.createCoupon({code:A.code.toUpperCase(),discountType:A.discountType,discountValue:A.discountValue,expiresAt:A.expiresAt||null,maxUses:A.maxUses?parseInt(A.maxUses):null}),w({code:"",discountType:"percentage",discountValue:0,expiresAt:"",maxUses:""}),k(!1),await z()}catch(e){alert(e instanceof Error?e.message:"Erro ao criar cupom")}finally{N(!1)}},M=async e=>{if(confirm("Tem certeza que deseja deletar este cupom?"))try{await i.F.deleteCoupon(e),await z()}catch(e){alert(e instanceof Error?e.message:"Erro ao deletar cupom")}},V=async(e,s)=>{try{await i.F.updateCoupon(e,{active:!s}),await z()}catch(e){alert(e instanceof Error?e.message:"Erro ao atualizar cupom")}};return a?(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)(x.A,{className:"w-8 h-8 animate-spin text-emerald-500"})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-zinc-100",children:"Cupons"}),(0,t.jsx)("p",{className:"text-zinc-400 mt-1",children:"Gerencie cupons de desconto com limite de tempo e usos"})]}),(0,t.jsxs)(c.$,{onClick:()=>k(!f),className:"bg-emerald-600 hover:bg-emerald-700",children:[(0,t.jsx)(p.A,{className:"w-4 h-4 mr-2"}),"Novo Cupom"]})]}),f&&(0,t.jsxs)(l.Zp,{className:"bg-zinc-900 border-zinc-800",children:[(0,t.jsx)(l.aR,{children:(0,t.jsx)(l.ZB,{children:"Criar Novo Cupom"})}),(0,t.jsxs)(l.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d.J,{children:"C\xf3digo do Cupom"}),(0,t.jsx)(n.p,{value:A.code,onChange:e=>w({...A,code:e.target.value.toUpperCase()}),className:"bg-zinc-800 border-zinc-700",placeholder:"DESCONTO10",maxLength:50})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d.J,{children:"Tipo de Desconto"}),(0,t.jsxs)(o.l6,{value:A.discountType,onValueChange:e=>w({...A,discountType:e}),children:[(0,t.jsx)(o.bq,{className:"bg-zinc-800 border-zinc-700",children:(0,t.jsx)(o.yv,{})}),(0,t.jsxs)(o.gC,{className:"bg-zinc-800 border-zinc-700",children:[(0,t.jsx)(o.eb,{value:"percentage",children:"Percentual (%)"}),(0,t.jsx)(o.eb,{value:"fixed",children:"Valor Fixo (R$)"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d.J,{children:"Valor do Desconto"}),(0,t.jsx)(n.p,{type:"number",step:"0.01",value:A.discountValue,onChange:e=>w({...A,discountValue:parseFloat(e.target.value)||0}),className:"bg-zinc-800 border-zinc-700",placeholder:"percentage"===A.discountType?"10":"5.00"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d.J,{children:"Data de Expira\xe7\xe3o (Opcional)"}),(0,t.jsx)(n.p,{type:"datetime-local",value:A.expiresAt,onChange:e=>w({...A,expiresAt:e.target.value}),className:"bg-zinc-800 border-zinc-700"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d.J,{children:"Limite de Usos (Opcional)"}),(0,t.jsx)(n.p,{type:"number",value:A.maxUses,onChange:e=>w({...A,maxUses:e.target.value}),className:"bg-zinc-800 border-zinc-700",placeholder:"Deixe vazio para ilimitado"})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(c.$,{onClick:C,disabled:b,className:"bg-emerald-600 hover:bg-emerald-700",children:[b?(0,t.jsx)(x.A,{className:"w-4 h-4 mr-2 animate-spin"}):(0,t.jsx)(p.A,{className:"w-4 h-4 mr-2"}),"Criar Cupom"]}),(0,t.jsx)(c.$,{onClick:()=>k(!1),variant:"outline",children:"Cancelar"})]})]})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:0===e.length?(0,t.jsx)(l.Zp,{className:"bg-zinc-900 border-zinc-800 col-span-full",children:(0,t.jsxs)(l.Wu,{className:"py-12 text-center text-zinc-500",children:[(0,t.jsx)(m.A,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),"Nenhum cupom cadastrado"]})}):e.map(e=>(0,t.jsxs)(l.Zp,{className:"bg-zinc-900 border-zinc-800 ".concat(e.active?"":"opacity-50"),children:[(0,t.jsx)(l.aR,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(m.A,{className:"w-5 h-5 text-emerald-500"}),(0,t.jsx)(l.ZB,{className:"text-lg",children:e.code})]}),(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)(c.$,{size:"sm",variant:e.active?"outline":"default",onClick:()=>V(e.id,e.active),className:"h-7 px-2",children:e.active?"Desativar":"Ativar"}),(0,t.jsx)(c.$,{size:"sm",variant:"destructive",onClick:()=>M(e.id),className:"h-7 px-2",children:(0,t.jsx)(u.A,{className:"w-4 h-4"})})]})]})}),(0,t.jsxs)(l.Wu,{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:["percentage"===e.discountType?(0,t.jsx)(h.A,{className:"w-4 h-4 text-blue-400"}):(0,t.jsx)(y.A,{className:"w-4 h-4 text-green-400"}),(0,t.jsx)("span",{className:"text-zinc-300",children:"percentage"===e.discountType?"".concat(e.discountValue,"% de desconto"):"R$ ".concat(e.discountValue.toFixed(2)," de desconto")})]}),e.expiresAt&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-zinc-400",children:[(0,t.jsx)(g.A,{className:"w-4 h-4"}),"Expira: ",new Date(e.expiresAt).toLocaleString("pt-BR")]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-zinc-400",children:[(0,t.jsx)(v.A,{className:"w-4 h-4"}),"Usos: ",e.currentUses,e.maxUses?" / ".concat(e.maxUses):" (ilimitado)"]}),(0,t.jsxs)("div",{className:"pt-2 border-t border-zinc-800",children:[e.isExpired&&(0,t.jsx)("span",{className:"inline-block px-2 py-1 text-xs rounded bg-red-500/10 text-red-400 border border-red-500/20",children:"Expirado"}),e.isMaxUsesReached&&(0,t.jsx)("span",{className:"inline-block px-2 py-1 text-xs rounded bg-orange-500/10 text-orange-400 border border-orange-500/20 ml-2",children:"Limite Atingido"}),e.isValid&&e.active&&(0,t.jsx)("span",{className:"inline-block px-2 py-1 text-xs rounded bg-emerald-500/10 text-emerald-400 border border-emerald-500/20",children:"Ativo"})]})]})]},e.id))})]})}},79509:(e,s,a)=>{Promise.resolve().then(a.bind(a,72188))},82063:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(71847).A)("ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]])},86948:(e,s,a)=>{"use strict";a.d(s,{BT:()=>n,Wu:()=>d,ZB:()=>l,Zp:()=>i,aR:()=>c});var t=a(95155);a(12115);var r=a(64269);function i(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",s),...a})}function c(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),...a})}function l(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",s),...a})}function n(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",s),...a})}function d(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",s),...a})}},91761:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(71847).A)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])}},e=>{e.O(0,[779,959,912,911,441,255,358],()=>e(e.s=79509)),_N_E=e.O()}]);