(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[936],{6132:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},11186:(e,s,t)=>{"use strict";t.d(s,{bq:()=>m,eb:()=>f,gC:()=>p,l6:()=>o,yv:()=>x});var a=t(95155),r=t(12115),l=t(13306),i=t(24033),d=t(12108),n=t(5917),c=t(64269);let o=l.bL;l.YJ;let x=l.WT,m=r.forwardRef((e,s)=>{let{className:t,children:r,...d}=e;return(0,a.jsxs)(l.l9,{ref:s,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-zinc-700 bg-zinc-800 px-3 py-2 text-sm text-zinc-100 ring-offset-zinc-950 placeholder:text-zinc-500 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...d,children:[r,(0,a.jsx)(l.In,{asChild:!0,children:(0,a.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=l.l9.displayName;let u=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.PP,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(d.A,{className:"h-4 w-4"})})});u.displayName=l.PP.displayName;let h=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.wn,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(i.A,{className:"h-4 w-4"})})});h.displayName=l.wn.displayName;let p=r.forwardRef((e,s)=>{let{className:t,children:r,position:i="popper",...d}=e;return(0,a.jsx)(l.ZL,{children:(0,a.jsxs)(l.UC,{ref:s,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border border-zinc-700 bg-zinc-800 text-zinc-100 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:i,...d,children:[(0,a.jsx)(u,{}),(0,a.jsx)(l.LM,{className:(0,c.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(h,{})]})})});p.displayName=l.UC.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.JU,{ref:s,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...r})}).displayName=l.JU.displayName;let f=r.forwardRef((e,s)=>{let{className:t,children:r,...i}=e;return(0,a.jsxs)(l.q7,{ref:s,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-zinc-700 focus:text-zinc-100 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...i,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(l.VF,{children:(0,a.jsx)(n.A,{className:"h-4 w-4"})})}),(0,a.jsx)(l.p4,{children:r})]})});f.displayName=l.q7.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.wv,{ref:s,className:(0,c.cn)("-mx-1 my-1 h-px bg-zinc-700",t),...r})}).displayName=l.wv.displayName},11647:(e,s,t)=>{"use strict";t.d(s,{E:()=>n});var a=t(95155);t(12115);var r=t(32467),l=t(83101),i=t(64269);let d=(0,l.F)("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:s,variant:t,asChild:l=!1,...n}=e,c=l?r.DX:"span";return(0,a.jsx)(c,{"data-slot":"badge",className:(0,i.cn)(d({variant:t}),s),...n})}},24542:(e,s,t)=>{Promise.resolve().then(t.bind(t,48399))},42529:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},48399:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>f});var a=t(95155),r=t(12115),l=t(86948),i=t(3998),d=t(11647),n=t(65142),c=t(11186),o=t(78874),x=t(42529),m=t(6132),u=t(89559),h=t(86651),p=t(36118);function f(){let[e,s]=(0,r.useState)([]),[t,f]=(0,r.useState)(!0),[v,j]=(0,r.useState)("all"),[g,y]=(0,r.useState)(""),[b,N]=(0,r.useState)(1),[w,k]=(0,r.useState)(1),[A,E]=(0,r.useState)({total:0,processed:0,failed:0});(0,r.useEffect)(()=>{z(),C()},[b,v]);let z=async()=>{try{f(!0);let e=new URLSearchParams({page:b.toString(),limit:"50",..."all"!==v&&{processed:v}}),t=await p.Sn.request("/api/webhooks/events?".concat(e),{method:"GET"});s(t.data.events||[]),k(t.data.totalPages||1)}catch(e){console.error("Erro ao carregar webhooks:",e),console.error("Falha ao carregar webhooks"),alert("Erro ao carregar webhooks")}finally{f(!1)}},C=async()=>{try{let[e,s,t]=await Promise.all([p.Sn.request("/api/webhooks/events?limit=1",{method:"GET"}),p.Sn.request("/api/webhooks/events?processed=true&limit=1",{method:"GET"}),p.Sn.request("/api/webhooks/events?processed=false&limit=1",{method:"GET"})]),a=e.total,r=s.total,l=t.total;E({total:a,processed:r,failed:l})}catch(e){console.error("Erro ao carregar estat\xedsticas:",e)}},P=e.filter(e=>{var s,t;return""===g||(null==(s=e.paymentId)?void 0:s.toLowerCase().includes(g.toLowerCase()))||(null==(t=e.eventType)?void 0:t.toLowerCase().includes(g.toLowerCase()))});return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"\uD83D\uDD14 Webhooks"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Monitoramento de eventos do Mercado Pago"})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,a.jsxs)(l.Zp,{children:[(0,a.jsx)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,a.jsx)(l.ZB,{className:"text-sm font-medium",children:"Total de Eventos"})}),(0,a.jsx)(l.Wu,{children:(0,a.jsx)("div",{className:"text-2xl font-bold",children:A.total})})]}),(0,a.jsxs)(l.Zp,{children:[(0,a.jsx)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,a.jsx)(l.ZB,{className:"text-sm font-medium",children:"Processados"})}),(0,a.jsx)(l.Wu,{children:(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:A.processed})})]}),(0,a.jsxs)(l.Zp,{children:[(0,a.jsx)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,a.jsx)(l.ZB,{className:"text-sm font-medium",children:"Com Erro"})}),(0,a.jsx)(l.Wu,{children:(0,a.jsx)("div",{className:"text-2xl font-bold text-red-600",children:A.failed})})]})]}),(0,a.jsxs)(l.Zp,{children:[(0,a.jsx)(l.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(l.ZB,{children:"Filtros"}),(0,a.jsx)(l.BT,{children:"Buscar e filtrar webhooks"})]}),(0,a.jsxs)(i.$,{onClick:z,variant:"outline",size:"sm",children:[(0,a.jsx)(u.A,{className:"w-4 h-4 mr-2"}),"Atualizar"]})]})}),(0,a.jsx)(l.Wu,{children:(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(h.A,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(n.p,{placeholder:"Buscar por ID de pagamento ou tipo de evento...",value:g,onChange:e=>y(e.target.value),className:"pl-10"})]})}),(0,a.jsxs)(c.l6,{value:v,onValueChange:j,children:[(0,a.jsx)(c.bq,{className:"w-[200px]",children:(0,a.jsx)(c.yv,{placeholder:"Status"})}),(0,a.jsxs)(c.gC,{children:[(0,a.jsx)(c.eb,{value:"all",children:"Todos"}),(0,a.jsx)(c.eb,{value:"true",children:"Processados"}),(0,a.jsx)(c.eb,{value:"false",children:"Pendentes/Erro"})]})]})]})})]}),(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsx)(l.ZB,{children:"Hist\xf3rico de Webhooks"}),(0,a.jsxs)(l.BT,{children:[P.length," evento(s) encontrado(s)"]})]}),(0,a.jsxs)(l.Wu,{children:[t?(0,a.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"Carregando webhooks..."}):0===P.length?(0,a.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"Nenhum webhook encontrado"}):(0,a.jsx)("div",{className:"space-y-3",children:P.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"font-semibold text-sm",children:["#",e.id]}),e.errorMessage?(0,a.jsxs)(d.E,{variant:"destructive",className:"gap-1",children:[(0,a.jsx)(o.A,{className:"w-3 h-3"}),"Erro"]}):e.processed?(0,a.jsxs)(d.E,{variant:"default",className:"gap-1",children:[(0,a.jsx)(x.A,{className:"w-3 h-3"}),"Processado"]}):(0,a.jsxs)(d.E,{variant:"outline",className:"gap-1",children:[(0,a.jsx)(m.A,{className:"w-3 h-3"}),"Pendente"]}),(0,a.jsx)(d.E,{variant:"outline",children:e.eventType})]}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:[(0,a.jsxs)("div",{children:["Payment ID: ",(0,a.jsx)("code",{className:"bg-muted px-1 rounded text-xs",children:e.paymentId||"N/A"})]}),e.errorMessage&&(0,a.jsxs)("div",{className:"text-destructive mt-1",children:["Erro: ",e.errorMessage]})]})]}),(0,a.jsxs)("div",{className:"text-right space-y-1",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:new Date(e.createdAt).toLocaleString("pt-BR")}),e.processedAt&&(0,a.jsxs)("div",{className:"text-xs text-green-600",children:["Processado: ",new Date(e.processedAt).toLocaleString("pt-BR")]})]})]},e.id))}),!t&&w>1&&(0,a.jsxs)("div",{className:"flex justify-center gap-2 mt-6",children:[(0,a.jsx)(i.$,{variant:"outline",onClick:()=>N(e=>Math.max(1,e-1)),disabled:1===b,children:"Anterior"}),(0,a.jsxs)("span",{className:"flex items-center px-4",children:["P\xe1gina ",b," de ",w]}),(0,a.jsx)(i.$,{variant:"outline",onClick:()=>N(e=>Math.min(w,e+1)),disabled:b===w,children:"Pr\xf3xima"})]})]})]})]})}},78874:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},86651:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},86948:(e,s,t)=>{"use strict";t.d(s,{BT:()=>n,Wu:()=>c,ZB:()=>d,Zp:()=>l,aR:()=>i});var a=t(95155);t(12115);var r=t(64269);function l(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",s),...t})}function i(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),...t})}function d(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",s),...t})}function n(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",s),...t})}function c(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",s),...t})}},89559:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])}},e=>{e.O(0,[779,485,631,488,441,255,358],()=>e(e.s=24542)),_N_E=e.O()}]);